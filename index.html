<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>SimpleGraph</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/control_menu.css">
    <link rel="stylesheet" type="text/css" href="css/select.css">
</head>

<body>

    <div class="controls">
        <a href="#hide1" class="hide" id="hide1">+</a>
        <a href="#show1" class="show" id="show1">-</a>
        <div class="control_panel">
            <form action="">
                <p>
                    <label class="label">Graph Type:</label>
                    <select class="turnintodropdown" id="graph_select">
						    <option value="none">Select a graph type:</option>
                            <option value="scatter">Scatter</option>
                            <option value="network">Network</option>
                            <option value="line">Line</option>
                            <option value="bar">Bar</option>
				    	</select>
                </p>
                <p>
                    <label class="label">Data set:</label>
                    <select class="turnintodropdown" id="data_set">
                        <option value="none">Select data set:</option>
                    </select>
                </p>

                <p>
                    <label class="label">Axes:</label>
                    <select class="turnintodropdown" name="axis" id="x_axis_select"></select>
                </p>
                <p>
                    <select class="turnintodropdown" name="axis" id="y_axis_select"></select>
                </p>
                <p>
                    <select class="turnintodropdown" name="axis" id="z_axis_select"></select>
                </p>
                <a class="graph_btn" onclick="drawGraph()">GRAPH!</a>
            </form>

            <form class="control_panel2">

                <div class="toggle">
                    <input type="checkbox" name="toggle" class="toggle-cb" id="2D3D" checked>
                    <label class="toggle-label" for="2D3D">
                        <div class="toggle-inner"></div>
                        <div class="toggle-switch"></div>
                    </label>
                </div>

            </form>



        </div>
    </div>


    <!-- JSON -->
    <script type="text/javascript" src="resources/data.json"></script>
    <!-- jQuery libraries -->
    <script type="text/javascript" src="js/libs/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="js/libs/jquery-validate.js"></script>
    <!-- three.js and TrackballControls libraries-->
    <script type="text/javascript" src="js/libs/three.js"></script>
    <script type="text/javascript" src="js/libs/TrackballControls.js"></script>

    <!-- Main js scripts -->
    <script type="text/javascript" src="js/parse.js"></script>
    <script type="text/javascript" src="js/objectscripts/raycaster.js"></script>
    <script type="text/javascript" src="js/objectscripts/select.js"></script>

    <script type="text/javascript" src="js/graph.js"></script>
    <script type="text/javascript" src="js/main.js"></script>

    <script type="text/javascript">

        extractQuantAttributes();

        /**
         * Populates data set select options.
         */
        function fillDataSet() {
            var data_sets = Object.keys(QUANT_ATTR);
            for (var i = 0; i < data_sets.length; i++) {
                var select_text = data_sets[i];
                var new_select = "<option></option>";
                $(new_select).attr("value", select_text).text(select_text).appendTo("#data_set");
            }
        }

        $(document).on('change', '#data_set', function() {
            $('option[value="none"]', this).remove();
            fillAxes($("#data_set").val());
        });

        $(document).on('change', '[name="axis"]', function() {
            $('option[value="none"]', this).remove();
        });

        /**
         * Populates the axis select options.
         */
        function fillAxes(type) {
            //First clear the options
            $("[name=axis] option").remove();
            //Add initial select messages
            $("<option></option>").attr("value", "none").text("Select x-axis data:").appendTo("#x_axis_select");
            $("<option></option>").attr("value", "none").text("Select y-axis data:").appendTo("#y_axis_select");
            $("<option></option>").attr("value", "none").text("Select z-axis data:").appendTo("#z_axis_select");

            //Get the data set to be used
            //console.log(type);
            for (var i = 0; i<QUANT_ATTR[type].length; i++) {
                var new_select = "<option></option>";
                var attribute = QUANT_ATTR[type][i];
                $(new_select).attr("value", attribute).text(attribute).appendTo("[name=axis]");

            }

        }


        /**
         * Checks that all necessary fields in controls have been filled correctly.
         */
        function checkFormValidity() {

        }
        /**
         * Gets all the values from the controls and stores them into GRAPH
         */
        function extractFormContents() {

            //Set graph_type
            GRAPH.graph_type = $("#graph_select").val();
            //Set 3D
            if($('#2D3D').is(":checked")){
                GRAPH.is2D = true;
            }
            else{
                GRAPH.is2D = false;
            }

            //Set json_class
            GRAPH.json_class = $("#data_set").val();
            //Set axes_attr
            GRAPH.axes_attr.push(
                $("#x_axis_select").val(),
                $("#y_axis_select").val(),
                $("#z_axis_select").val()
            );
            //Set scale_log


            //Set axes_range

            //Set axes_labels
        }

        fillDataSet();
        //tamingselect();

    </script>


</body>

</html>
